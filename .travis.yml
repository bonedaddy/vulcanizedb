dist: trusty
language: go
go:
- 1.12
services:
- postgresql
addons:
  postgresql: '11.2'
go_import_path: github.com/makerdao/vulcanizedb
before_install:
- make installtools
- bash ./scripts/install-postgres-11.sh
- curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
- echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list
- sudo apt-get update && sudo apt-get install yarn
script:
- env GO111MODULE=on make test
- env GO111MODULE=on make integrationtest
notifications:
  email: false
env:
  matrix:
    secure: StT4aFWC2b83porYJj3MHPxGvhVTOh0QfLwWoY+dMSpC4mW5uLQ8Fbj8wGm1wuANC/VpCCVRQKtoimENuZAJz9C0GYvaZy1nLA/pSq7C7idgev5SbrWLiHDTnv8ro+8M+HMIeHZhLbyWsqIawnIQtrzPn8zo5CbT3NfwRoI/Dk+8roHAD2WsVT/Q1kIIu23s4myK9P2ytUy9tcVeSYK+SKbs5/VRV67fH4TOMP2HzUaSNeb+m1IpNjOpME/+aYCsfaun2M/Ndh10P+mSL6tw1F8aPuNchz1g/p2/jMe0P3Ygf1H4eppaZCSqqVp3lF+6rsXsZ9KrZJUBFtRkqCKZVyl2uQm4btlSqoD1FOCUKjqkoprZqRwWKsfcjOEO6nOC7aKL5tBOGi/V0ZtmChmZzyNhu40QrBvKAvm2aX2iXgSk7BvGSyKE8ny8RiYgYOaJbaFI98wKQSnB1qbxLpx7C3+fH7WecGt5th5kYMfQtdUU9pXylaj/CHFQlJrIOZxpPTF3oGvL/amSpVO5SS6fqjiOmEOMCeGxQemEvjDqQJZOPsxTGmkDa+IwbSAbAhYF1Cyvs6AU+wddE19dKwymtHnw5RbXkOY8cfSmKSAN51sz+6ZzbQ46iu/7w4LGwdylBJ8aRZmOyutwrzrJatY1/2I2MgHFjpUNqGz9EnTrHXM=
